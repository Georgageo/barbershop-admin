<div class="border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden">
  <p-table
  [value]="data"
  [paginator]="paginator"
  [rows]="rows"
  [rowsPerPageOptions]="rowsPerPageOptions"
  [showCurrentPageReport]="true"
  currentPageReportTemplate="{{ 'table.pageReport' | translate }}"
  [loading]="loading"
  [sortField]="sortField"
  [sortOrder]="sortOrder"
  [styleClass]="striped ? 'p-datatable-striped' : ''"
>
  <ng-template #header>
    <tr>
      @for (col of columns; track col.field) {
        @if (col.sortable) {
          <th [pSortableColumn]="col.field">
            {{ col.header }}
            <p-sortIcon [field]="col.field" />
          </th>
        } @else {
          <th>{{ col.header }}</th>
        }
      }
      @if (actions.length) {
        <th class="text-center">{{ 'table.actions' | translate }}</th>
      }
    </tr>
  </ng-template>

  <ng-template #body let-row>
    <tr>
      @for (col of columns; track col.field) {
        <td>
          @if (getCellTemplate(col.field); as tmpl) {
            <ng-container *ngTemplateOutlet="tmpl; context: { $implicit: row }" />
          } @else {
            {{ row[col.field] ?? 'â€”' }}
          }
        </td>
      }
      @if (actions.length) {
        <td class="text-center">
          @for (action of actions; track action.icon) {
            @if (!action.visible || action.visible(row)) {
              <p-button
                [icon]="action.icon"
                [rounded]="true"
                [text]="true"
                [severity]="action.severity ?? 'secondary'"
                [pTooltip]="action.tooltip"
                [disabled]="action.disabled?.(row) ?? false"
                (onClick)="action.onClick(row)"
              />
            }
          }
        </td>
      }
    </tr>
  </ng-template>

  <ng-template #emptymessage>
    <tr>
      <td [attr.colspan]="columns.length + (actions.length ? 1 : 0)" class="text-center py-8">
        {{ emptyMessage ?? ('table.emptyDefault' | translate) }}
      </td>
    </tr>
  </ng-template>
</p-table>
</div>