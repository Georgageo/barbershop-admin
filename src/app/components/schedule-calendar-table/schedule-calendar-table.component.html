<!-- Desktop: table -->
<div class="hidden md:block overflow-x-auto">
  <table class="w-full border-collapse calendar-table">
    <thead>
      <tr>
        @for (wd of weekDays; track wd) {
        <th
          class="p-2 text-center text-xs font-semibold text-slate-600 dark:text-slate-400 border-b border-slate-200 dark:border-slate-700">
          {{ wd }}</th>
        }
      </tr>
    </thead>
    <tbody>
      @for (week of weeks; track week[0]?.isoDate ?? $index) {
      <tr>
        @for (day of week; track day.isoDate) {
        <td
          class="align-top p-1 sm:p-2 min-w-[100px] sm:min-w-[120px] border border-slate-100 dark:border-slate-700 min-h-[100px] cursor-pointer"
          [class]="day.isCurrentMonth ? 'bg-white dark:bg-slate-800/50' : 'bg-slate-50 dark:bg-slate-900/50 text-slate-400 dark:text-slate-500'"
          (click)="daySelected.emit(day)">
          <div class="text-sm font-medium mb-1">{{ day.dayOfMonth }}</div>
          <div class="space-y-1">
            @for (entry of day.entries; track entry.userId + entry.workDate) {
            <div
              class="text-xs rounded px-1.5 py-1 bg-cyan-50 dark:bg-cyan-900/20 text-slate-700 dark:text-slate-300 border border-cyan-100 dark:border-cyan-800/50">
              <span class="font-medium">{{ entryTitle(entry) }}</span>
              @if (entrySubtitle(entry)) {
              <span class="block truncate">{{ entrySubtitle(entry) }}</span>
              }
              <span class="block text-slate-500 dark:text-slate-400">{{ entryTime(entry) }}</span>
            </div>
            } @empty {
            @if (emptyMessage && day.isCurrentMonth && !$first) {
            <span class="text-[11px] text-slate-400 dark:text-slate-500">{{ emptyMessage }}</span>
            }
            }
          </div>
        </td>
        }
      </tr>
      }
    </tbody>
  </table>
</div>

<!-- Mobile: list of day cards (current month only) -->
<div class="md:hidden space-y-2">
  @for (day of mobileDays; track day.isoDate) {
  <button type="button"
    class="w-full text-left rounded-xl border p-3 transition active:scale-[0.99] min-h-[52px]"
    [class]="day.isCurrentMonth
      ? 'border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800/80 text-slate-800 dark:text-slate-200'
      : 'border-slate-100 dark:border-slate-700 bg-slate-50/80 dark:bg-slate-800/40 text-slate-400 dark:text-slate-500'"
    (click)="daySelected.emit(day)">
    <div class="flex items-center justify-between gap-2 mb-1">
      <span class="font-semibold text-sm">{{ getDayLabel(day) }}</span>
      @if (day.entries.length > 0) {
      <span class="text-xs text-slate-500 dark:text-slate-400">{{ day.entries.length }} βάρδια</span>
      }
    </div>
    <div class="space-y-1">
      @for (entry of day.entries; track entry.userId + entry.workDate) {
      <div
        class="text-xs rounded-lg px-2 py-1.5 bg-cyan-50 dark:bg-cyan-900/20 text-slate-700 dark:text-slate-300 border border-cyan-100 dark:border-cyan-800/50">
        <span class="font-medium">{{ entryTitle(entry) }}</span>
        @if (entrySubtitle(entry)) {
        <span class="block truncate">{{ entrySubtitle(entry) }}</span>
        }
        <span class="block text-slate-500 dark:text-slate-400">{{ entryTime(entry) }}</span>
      </div>
      } @empty {
      <span class="text-xs text-slate-400 dark:text-slate-500">—</span>
      }
    </div>
  </button>
  }
</div>

